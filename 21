local whitelist = {
    ["MissSherya"] = true,
    ["luis_109170"] = true,
    ["JohanAxelRS"] = true,
    ["elpepeandasuelto300"] = true,
    ["Alexqwq124"] = true,
    ["Cesar0_o1"] = true,
}

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local VirtualInputManager = game:GetService("VirtualInputManager")
local player = Players.LocalPlayer

if not whitelist[player.Name] then
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "Acceso Denegado",
        Text = "No estás autorizado para usar este script.",
        Duration = 10
    })
    return
end

local UILibrary = loadstring(game:HttpGet("https://raw.githubusercontent.com/2581235867/21/refs/heads/main/source.lua"))().new({
    Logo = "rbxassetid://72748378219736", -- Tu logo personalizado
    Title = "Sherya Script",
    Description = "By Isabella",
    Keybind = Enum.KeyCode.LeftControl
})

-- Tabs
local MainTab = UILibrary:NewTab({Title = "Main", Icon = "rbxassetid://7734053499"})
local MiscTab = UILibrary:NewTab({Title = "Misc", Icon = "rbxassetid://7734053499"})
local KillerTab = UILibrary:NewTab({Title = "Killer", Icon = "rbxassetid://7734053499"})
local PlayersTab = UILibrary:NewTab({Title = "Players", Icon = "rbxassetid://7734053499"})

-- Secciones
local MainSection = MainTab:NewSection({Title = "Funciones Principales", Position = "Left"})
local MiscSection = MiscTab:NewSection({Title = "Utilidades", Position = "Left"})
local KillerSection = KillerTab:NewSection({Title = "Killer", Position = "Left"})
local PlayersSection = PlayersTab:NewSection({Title = "Teleports", Position = "Left"})

-- Main
local autoPunch = false
MainSection:NewToggle({
    Title = "Auto Punch",
    Default = false,
    Callback = function(state)
        autoPunch = state
        local function equipPunch()
            local backpack = player:WaitForChild("Backpack")
            local character = player.Character or player.CharacterAdded:Wait()
            local tool = backpack:FindFirstChild("Punch") or character:FindFirstChild("Punch")
            if tool and tool.Parent ~= character then
                tool.Parent = character
                task.wait(0.2)
            end
        end
        if autoPunch then
            equipPunch()
        end
        task.spawn(function()
            while autoPunch do
                pcall(function()
                    local character = player.Character or player.CharacterAdded:Wait()
                    local tool = character:FindFirstChild("Punch")
                    if tool then
                        tool:Activate()
                    else
                        equipPunch()
                    end
                end)
                task.wait(0.1)
            end
        end)
    end
})

local autoOrb = false
local orbGuiCreado = false
MainSection:NewToggle({
    Title = "Auto Orb",
    Default = false,
    Callback = function(state)
        autoOrb = state
        if not orbGuiCreado then
            local screenGui = Instance.new("ScreenGui")
            screenGui.Name = "Sherya"
            screenGui.Parent = player:WaitForChild("PlayerGui")
            orbGuiCreado = true
        end
        task.spawn(function()
            while autoOrb do
                for _, v in pairs(workspace:GetChildren()) do
                    if v.Name == "Drop" and v:IsA("BasePart") then
                        v.CFrame = player.Character.HumanoidRootPart.CFrame
                    end
                end
                task.wait(1)
            end
        end)
    end
})

local autoDemonSword = false
MainSection:NewToggle({
    Title = "Auto (Demon Sword)",
    Default = false,
    Callback = function(state)
        autoDemonSword = state
        local function equipDemonSword()
            local character = player.Character or player.CharacterAdded:Wait()
            local backpack = player:WaitForChild("Backpack")
            local tool = backpack:FindFirstChild("Demon Sword") or character:FindFirstChild("Demon Sword")
            if tool and tool.Parent ~= character then
                tool.Parent = character
                task.wait(0.2)
            end
        end
        if autoDemonSword then
            equipDemonSword()
        end
        task.spawn(function()
            while autoDemonSword do
                pcall(function()
                    local character = player.Character or player.CharacterAdded:Wait()
                    local tool = character:FindFirstChild("Demon Sword")
                    if not tool then
                        equipDemonSword()
                        tool = character:FindFirstChild("Demon Sword")
                    end
                    if tool then
                        tool:Activate()
                    end
                end)
                task.wait(0.15)
            end
        end)
    end
})

-- Misc
local speedValue = 16
MiscSection:NewTextbox({
    Title = "Auto Speed",
    Default = "16",
    Callback = function(text)
        speedValue = tonumber(text) or 16
        if player and player.Character and player.Character:FindFirstChild("Humanoid") then
            player.Character.Humanoid.WalkSpeed = speedValue
        end
    end
})

local autoSpeedEnabled = false
local autoSpeedConnection
MiscSection:NewToggle({
    Title = "Auto Set Speed",
    Default = false,
    Callback = function(bool)
        autoSpeedEnabled = bool
        if autoSpeedEnabled then
            if player and player.Character and player.Character:FindFirstChild("Humanoid") then
                player.Character.Humanoid.WalkSpeed = speedValue
            end
            if autoSpeedConnection then
                autoSpeedConnection:Disconnect()
            end
            autoSpeedConnection = player.CharacterAdded:Connect(function(character)
                local humanoid = character:WaitForChild("Humanoid")
                if humanoid then
                    humanoid.WalkSpeed = speedValue
                end
            end)
        else
            if autoSpeedConnection then
                autoSpeedConnection:Disconnect()
                autoSpeedConnection = nil
            end
        end
    end
})

local infiniteJumpConnection
MiscSection:NewToggle({
    Title = "Infinite Jump",
    Default = false,
    Callback = function(bool)
        if bool then
            infiniteJumpConnection = UserInputService.JumpRequest:Connect(function()
                if player.Character and player.Character:FindFirstChild("Humanoid") then
                    player.Character.Humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
                end
            end)
        else
            if infiniteJumpConnection then
                infiniteJumpConnection:Disconnect()
                infiniteJumpConnection = nil
            end
        end
    end
})

local noclipLoop
MiscSection:NewToggle({
    Title = "No Clip",
    Default = false,
    Callback = function(bool)
        if bool then
            noclipLoop = RunService.Stepped:Connect(function()
                for _, child in pairs(player.Character:GetDescendants()) do
                    if child:IsA("BasePart") and child.CanCollide == true then
                        child.CanCollide = false
                    end
                end
            end)
        else
            if noclipLoop then
                noclipLoop:Disconnect()
                noclipLoop = nil
            end
            for _, child in pairs(player.Character:GetDescendants()) do
                if child:IsA("BasePart") then
                    child.CanCollide = true
                end
            end
        end
    end
})

MiscSection:NewButton({
    Title = "Chat Espía",
    Callback = function()
        loadstring(game:HttpGet("https://pastebin.com/raw/Vv9Yw3Uw"))()
    end
})

MiscSection:NewButton({
    Title = "Anti AFK",
    Callback = function()
        local VirtualUser = game:GetService("VirtualUser")
        player.Idled:Connect(function()
            VirtualUser:Button2Down(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
            task.wait(1)
            VirtualUser:Button2Up(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
        end)
        game.StarterGui:SetCore("SendNotification", {
            Title = "Anti-AFK",
            Text = "Activado correctamente",
            Duration = 5
        })
    end
})

-- Killer
local autoStomp = false
local stompToolName = "Stomp"
local function equipStomp()
    local character = player.Character or player.CharacterAdded:Wait()
    local backpack = player:WaitForChild("Backpack")
    if character:FindFirstChildOfClass("Tool") and character:FindFirstChildOfClass("Tool").Name == stompToolName then
        return
    end
    local stompTool = backpack:FindFirstChild(stompToolName)
    if stompTool then
        stompTool.Parent = character
    end
end

KillerSection:NewToggle({
    Title = "Auto Kill (Punch)",
    Default = false,
    Callback = function(state)
        local autoPunchAll = state
        task.spawn(function()
            while autoPunchAll do
                pcall(function()
                    local backpack = player:WaitForChild("Backpack")
                    local character = player.Character or player.CharacterAdded:Wait()
                    local hrp = character:FindFirstChild("HumanoidRootPart")
                    local tool = backpack:FindFirstChild("Punch") or character:FindFirstChild("Punch")
                    if tool and tool.Parent ~= character then
                        tool.Parent = character
                    end
                    for _, otherPlayer in ipairs(Players:GetPlayers()) do
                        if not autoPunchAll then break end
                        if otherPlayer ~= player and otherPlayer.Character and otherPlayer.Character:FindFirstChild("HumanoidRootPart") then
                            hrp.CFrame = otherPlayer.Character.HumanoidRootPart.CFrame + Vector3.new(0, 2, 0)
                            if tool and tool.Activate then
                                tool:Activate()
                            end
                            task.wait(1.2)
                        end
                    end
                end)
                task.wait(1)
            end
        end)
    end
})

KillerSection:NewToggle({
    Title = "Auto Kill (Pisotear)",
    Default = false,
    Callback = function(state)
        autoStomp = state
        task.spawn(function()
            while autoStomp do
                pcall(function()
                    equipStomp()
                    local character = player.Character
                    local root = character and character:FindFirstChild("HumanoidRootPart")
                    local tool = character and character:FindFirstChild(stompToolName)
                    if tool and root then
                        for _, otherPlayer in pairs(Players:GetPlayers()) do
                            if otherPlayer ~= player and otherPlayer.Character and otherPlayer.Character:FindFirstChild("HumanoidRootPart") and otherPlayer.Character:FindFirstChild("Humanoid") and otherPlayer.Character.Humanoid.Health > 0 then
                                local targetRoot = otherPlayer.Character.HumanoidRootPart
                                root.CFrame = targetRoot.CFrame + Vector3.new(0, 2, 0)
                                tool:Activate()
                                task.wait(0.2)
                            end
                        end
                    end
                end)
                task.wait(0.5)
            end
        end)
    end
})

KillerSection:NewToggle({
    Title = "Auto Kill (Demon Sword)",
    Default = false,
    Callback = function(state)
        local autoKill = state
        if autoKill then
            local character = player.Character or player.CharacterAdded:Wait()
            local backpack = player:WaitForChild("Backpack")
            local tool = backpack:FindFirstChild("Demon Sword") or character:FindFirstChild("Demon Sword")
            if tool and tool.Parent ~= character then
                tool.Parent = character
                task.wait(0.2)
            end
        end
        task.spawn(function()
            while autoKill do
                pcall(function()
                    local lp = player
                    local character = lp.Character or lp.CharacterAdded:Wait()
                    local humanoidRoot = character:FindFirstChild("HumanoidRootPart")
                    local tool = character:FindFirstChild("Demon Sword") or lp.Backpack:FindFirstChild("Demon Sword")
                    if tool and tool.Parent ~= character then
                        tool.Parent = character
                        task.wait(0.2)
                    end
                    if not character:FindFirstChild("Demon Sword") then return end
                    for _, p in ipairs(Players:GetPlayers()) do
                        if p ~= lp and p.Character and p.Character:FindFirstChild("HumanoidRootPart") and p.Character:FindFirstChild("Humanoid") and p.Character.Humanoid.Health > 0 then
                            local enemyHRP = p.Character.HumanoidRootPart
                            humanoidRoot.CFrame = enemyHRP.CFrame * CFrame.new(0, 0, 2)
                            local sword = character:FindFirstChild("Demon Sword")
                            if sword then
                                sword:Activate()
                            end
                            task.wait(0.3)
                        end
                    end
                end)
                task.wait(1)
            end
        end)
    end
})

-- Players
for _, p in ipairs(Players:GetPlayers()) do
    if p ~= player then
        PlayersSection:NewButton({
            Title = "Teleport " .. p.Name,
            Callback = function()
                if p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
                    local myChar = player.Character
                    if myChar and myChar:FindFirstChild("HumanoidRootPart") then
                        myChar.HumanoidRootPart.CFrame = p.Character.HumanoidRootPart.CFrame + Vector3.new(0, 3, 0)
                        UILibrary:Notify({
                            Title = "Teletransporte",
                            Content = "Teletransportado a " .. p.Name,
                            Duration = 3
                        })
                    end
                end
            end
        })
    end
end
